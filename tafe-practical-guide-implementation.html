<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>TAFE Practical Guide ‚Äî Implementation</title>
  <style>
    :root {
      --max-w: 1440px;
    }
    html, body { margin: 0; padding: 0; background:transparent; font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; color:#111; }
    .page { display:flex; justify-content:center; padding:0; }
    .container { position:relative; width:100%; max-width: var(--max-w); background:#DBE5F1; border-radius:8px; box-shadow:0 10px 40px rgba(0,0,0,0.25); }

    .component { display:none; position:relative; background:#DBE5F1; }
    .component.active { display:block; }

    .svg-host { position:relative; width:100%; height:auto; display:block; background:#DBE5F1; }
    .svg-host img { width:100%; height:auto; display:block; }
    .svg-host.accordion-slide { min-height: 2524px; } /* Ensure minimum height for accordion slides */

    /* overlay root sits above the image in the svg-host */
    .overlay-root { position:absolute; top:0; left:0; right:0; bottom:0; pointer-events:none; z-index:10; }
    .click-area { position:absolute; border-radius:8px; pointer-events:auto; cursor:pointer; }
    .click-area.debug { outline: 2px dashed rgba(191,224,2,0.8); background: rgba(191,224,2,0.15); }
    
    /* Video Modal */
    .video-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: rgba(0, 0, 0, 0.9);
      z-index: 99999;
      justify-content: center;
      align-items: center;
    }
    .video-modal.active {
      display: flex;
    }
    .video-modal .close-button {
      position: absolute;
      top: 20px;
      right: 20px;
      width: 40px;
      height: 40px;
      background: rgba(255, 255, 255, 0.9);
      border: none;
      border-radius: 50%;
      font-size: 24px;
      line-height: 1;
      cursor: pointer;
      color: #252D36;
      font-weight: 700;
      z-index: 100000;
    }
    .video-modal .close-button:hover {
      background: white;
    }
  </style>
</head>
<body>
  <div class="page">
    <div class="container">
      <!-- components injected here by JS -->
    </div>
  </div>

  <!-- Video Modal -->
  <div class="video-modal" id="videoModal">
    <button class="close-button" id="closeVideoModal">&times;</button>
    <video id="modalVideo" controls style="max-width: 90%; max-height: 90vh; border-radius: 8px;">
      <source id="modalVideoSource" src="" type="video/mp4" />
    </video>
  </div>

  <script>
    /**
     * TAFE Practical Guide Implementation
     * Using RMIT accordion rendering approach
     */

    const container = document.querySelector('.container');

    const components = [
      // Slide 1 - Practical Exercises
      {
        id: 1,
        file: "EDU Practical Guide (Implementation)/TAFE Implementation/1 - Practical Exercises.svg",
        viewBoxWidth: 1440,
        viewBoxHeight: 1249,
        overlays: [
          { action: "next", x: 1293, y: 80, w: 50, h: 50 },
          { action: "next", x: 156, y: 659, w: 174, h: 52 },
          { action: "next", x: 1173, y: 1133, w: 207, h: 56 }
        ]
      },
      // Slide 2 - Compare Tools vs. to NCC AS
      {
        id: 2,
        file: "EDU Practical Guide (Implementation)/TAFE Implementation/2 - Compare Tools vs. to NCC AS.svg",
        viewBoxWidth: 1440,
        viewBoxHeight: 1003,
        overlays: [
          { action: "back", x: 101, y: 80, w: 50, h: 50 },
          { action: "next", x: 1293, y: 80, w: 50, h: 50 },
          { action: "video", src: "https://20832146.fs1.hubspotusercontent-na1.net/hubfs/20832146/(Ari)%20Videos%20for%20Activation%20Pages%20-%20Jan%202026/EDU/11%20Ways/Module%201%20-%20Compres%20Tools%20to%20NCC%20AS.mp4", x: 1214, y: 220, w: 166, h: 48 },
          { action: "url", url: "https://tafensw.buildingtools.co/tools/stairs-handrails-balustrades-accessibility-ncc2022.2-1.1?point=54b291fa-05a3-432b-a52a-5ff6405b38ae&shareId=ch6ODI-1761100259668&standard=&zoom=3.616527535033817&x=601.6708508255155&y=408.41595882642747&action=click&type=1", x: 176.734, y: 585, w: 148.61, h: 24 },
          { action: "url", url: "https://ncc.abcb.gov.au/editions/ncc-2022/adopted/housing-provisions/11-safe-movement-and-access/part-112-stairway-and-ramp-construction", x: 366.359, y: 661, w: 196.633, h: 24 },
          { action: "back", x: 60, y: 823, w: 142, h: 56 },
          { action: "next", x: 1199, y: 823, w: 181, h: 56 }
        ]
      },
      // Slide 3 - Foundational Tools for Education (with Accordions)
      {
        id: 3,
        file: "EDU Practical Guide (Implementation)/TAFE Implementation/3 - Foundational Tools for Education.svg",
        viewBoxWidth: 1440,
        viewBoxHeight: 2524,
        overlays: [
          { action: "back", x: 101, y: 80, w: 50, h: 50 },
          { action: "next", x: 1293, y: 80, w: 50, h: 50 },
          { action: "video", src: "https://20832146.fs1.hubspotusercontent-na1.net/hubfs/20832146/(Ari)%20Videos%20for%20Activation%20Pages%20-%20Jan%202026/EDU/11%20Ways/2.%20Foundational%20Tools.webm", x: 1214.5, y: 216, w: 164, h: 46 }
        ],
        accordions: [
          { id: 'acc1', collapsed: "EDU Practical Guide (Implementation)/Accordion/1 - Construction Basics Collapsed.svg", expanded: "EDU Practical Guide (Implementation)/Accordion/1 - Construction Basics Open.svg", y: 290, hC: 62, hE: 417,
            links: [
              { url: "https://tafensw.buildingtools.co/tools/skills-abc-of-building-construction-ncc2022.2-1.3?menu_id=10-1-0&shareId=ch6ODI-1766983736919&zoom=0.9345794392523364&x=487.68909367943223&y=277.27691864293587&standard=&action=click&type=0", x: 8, y: 339.531, w: 112.992, h: 18 },
              { url: "https://tafensw.buildingtools.co/tools/skills-whos-who-building-zoo-developer-owner-ncc2022.2-1.21?r=1&x=509.857985606684&y=234.04643013822002&zoom=1.1449&shareId=ch6ODI-1766983736919&menu_id=10-1-11&standard=&action=click&type=0", x: 443, y: 339.531, w: 179.078, h: 18 },
              { url: "https://tafensw.buildingtools.co/tools/skills-ncc-compliance-overview-build-right-ncc2022.2-1.1?menu_id=10-1-2&shareId=ch6ODI-1766983736919&zoom=1.6057814764784306&x=526.9181106276394&y=431.8785599789935&point=a024f212-ce4f-465b-be3a-7ee8ad71b327&standard=&action=click&type=0", x: 878, y: 339.531, w: 135.23, h: 18 }
            ]
          },
          { id: 'acc2', collapsed: "EDU Practical Guide (Implementation)/Accordion/2 - Science of Construction Quality Collapsed.svg", expanded: "EDU Practical Guide (Implementation)/Accordion/2 - Science of Construction Quality Open.svg", y: 362, hC: 62, hE: 417,
            links: [
              { url: "https://tafensw.buildingtools.co/tools/ncc-bca-building-classification-ncc2022-1.4?menu_id=10-0-0&shareId=ch6ODI-1766983736919&zoom=1.07&x=470.1127355439253&y=272.3830200186916&standard=&action=click&type=0", x: 8, y: 317.531, w: 138.844, h: 18 },
              { url: "https://tafensw.buildingtools.co/tools/skills-fire-resistance-science-ncc2022.2-1.2?x=290.99456790839486&y=307.24849066011535&zoom=0.7503651759245002&shareId=ch6ODI-1766983736919&menu_id=10-3-2&standard=&action=click&type=0", x: 443, y: 317.531, w: 109, h: 18 }
            ]
          },
          { id: 'acc3', collapsed: "EDU Practical Guide (Implementation)/Accordion/3 - Design Fundamentals Collapsed.svg", expanded: "EDU Practical Guide (Implementation)/Accordion/3 - Design Fundamentals Open.svg", y: 434, hC: 62, hE: 417,
            links: [
              { url: "https://tafensw.buildingtools.co/tools/ncc-bca-building-classification-ncc2022-1.4?menu_id=10-0-0&shareId=ch6ODI-1766983736919&zoom=1.07&x=470.1127355439253&y=272.3830200186916&standard=&action=click&type=0", x: 8, y: 337.531, w: 177.953, h: 18 },
              { url: "https://tafensw.buildingtools.co/tools/skills-designer-construction-set-out-ncc2022.2-1.10?menu_id=10-0-1&shareId=ch6ODI-1766983736919&zoom=1.5007303518490005&x=158.42309947685015&y=328.18551986939093&standard=&action=click&type=0", x: 443, y: 337.531, w: 100, h: 18 }
            ]
          },
          { id: 'acc4', collapsed: "EDU Practical Guide (Implementation)/Accordion/4 - Plumbing Collapsed.svg", expanded: "EDU Practical Guide (Implementation)/Accordion/4 - Plumbing Open.svg", y: 506, hC: 62, hE: 417,
            links: [
              { url: "https://tafensw.buildingtools.co/tools/services-plumbing-overview-ncc2022.2-1.7?menu_id=6-4-0&shareId=ch6ODI-1767061462569&zoom=1.4025517307000004&x=533.7488731200478&y=312.0087601678406&standard=&action=click&type=0", x: 8, y: 337.531, w: 153.938, h: 18 },
              { url: "https://tafensw.buildingtools.co/tools/hot-water-service-ncc2022.2-1.7?v=1767061873557&shareId=ch6ODI-1767061462569&zoom=0.9345794392523364&menu_id=6-4-0&x=445.37797015287833&y=311.4518705626312&standard=&action=click&type=0", x: 443, y: 337.531, w: 135.266, h: 18 },
              { url: "https://tafensw.buildingtools.co/tools/services-plumbing-sanitary-floor-waste-gully-fwg-ncc2022.2-1.0?menu_id=6-4-2&shareId=ch6ODI-1767061462569&zoom=1.07&x=489.3701400440726&y=310.82728075525284&standard=&action=click&type=0", x: 878, y: 337.531, w: 140.88, h: 18 }
            ]
          },
          { id: 'acc5', collapsed: "EDU Practical Guide (Implementation)/Accordion/5 - Carpentry Collapsed.svg", expanded: "EDU Practical Guide (Implementation)/Accordion/5 - Carpentry Open.svg", y: 578, hC: 62, hE: 717,
            links: [
              { url: "https://tafensw.buildingtools.co/tools/structure-framing-overview-timber-ncc2022.2-1.16?zoom=1.1449&shareId=ch6ODI-1767061462569&menu_id=8-3-0&x=521.2178444254037&y=283.3007067635197&standard=&action=click&type=0", x: 8, y: 337.531, w: 194.594, h: 18 },
              { url: "https://tafensw.buildingtools.co/tools/structure-timber-balconies-decks-ncc2022.2-1.10?menu_id=8-3-1&shareId=ch6ODI-1767061462569&zoom=1.3107960100000002&x=426.82889203691633&y=287.85782435940337&standard=&action=click&type=0", x: 443, y: 337.531, w: 143.312, h: 18 },
              { url: "https://tafensw.buildingtools.co/tools/structure-timber-wall-framing-ncc2022.2-1.9?v=1767063437398&shareId=ch6ODI-1767061462569&zoom=1.1449&menu_id=8-3-8&x=328.2583383360814&y=286.27975152405344&standard=&action=click&type=0", x: 878, y: 337.531, w: 156.31, h: 18 },
              { url: "https://tafensw.buildingtools.co/tools/structure-timber-girder-saddle-truss-ncc2022.2-1.0?menu_id=8-3-3&shareId=ch6ODI-1767061462569&zoom=1.225043&x=517.2776215098921&y=267.94657116752524&standard=&action=click&type=0", x: 8, y: 664.531, w: 168.203, h: 18 }
            ]
          },
          { id: 'acc6', collapsed: "EDU Practical Guide (Implementation)/Accordion/6 - Electrical Collapsed.svg", expanded: "EDU Practical Guide (Implementation)/Accordion/6 - Electrical Open.svg", y: 650, hC: 62, hE: 417,
            links: [
              { url: "https://tafensw.buildingtools.co/tools/wet-area-bathroom-electrical-safety-ncc2022.2-1.26?point=dd51959e-d7a6-4e25-a4e7-1fb86fcbc04a&shareId=ch6ODI-1767061462569&standard=&zoom=2.5785341502012487&x=412.43253055204093&y=279.2656544948571&action=click&type=1", x: 8, y: 345.531, w: 144.188, h: 18 },
              { url: "https://tafensw.buildingtools.co/tools/services-aerial-wiring-clearance-insulated-ncc2022.2-1.1?menu_id=6-0-0&shareId=ch6ODI-1767061462569&zoom=1.576439032602215&x=500.90786776856737&y=413.78667889763096&standard=&action=click&type=0", x: 443, y: 345.531, w: 183.391, h: 18 },
              { url: "https://tafensw.buildingtools.co/tools/services-electrical-meter-box-residential-ncc2022.2-1.9?x=513.2609407909374&y=238.33392018786876&zoom=1.7180816100355623&shareId=ch6ODI-1767061462569&menu_id=6-0-3&standard=&action=click&type=0", x: 878, y: 345.531, w: 75.625, h: 18 }
            ]
          },
          { id: 'acc7', collapsed: "EDU Practical Guide (Implementation)/Accordion/7 - Waterproofing Collapsed.svg", expanded: "EDU Practical Guide (Implementation)/Accordion/7 - Waterproofing Open.svg", y: 722, hC: 62, hE: 417,
            links: [
              { url: "https://tafensw.buildingtools.co/tools/waterproofing-sub-sill-sliding-door-window-ncc2022.2-1.29?v=1767063868155&shareId=ch6ODI-1767061462569&zoom=1.3107960100000002&menu_id=9-1-0&x=519.5816757512367&y=269.62559700389886&standard=&action=click&type=0", x: 8, y: 345.531, w: 322.094, h: 18 },
              { url: "https://tafensw.buildingtools.co/tools/waterproofing-cavity-slide-door-waterstop-ncc2022.2-1.26?menu_id=9-2-5-0&shareId=ch6ODI-1767061462569&zoom=1.225043&x=394.1901338301639&y=371.5158489408847&standard=&action=click&type=0", x: 443, y: 345.531, w: 143.25, h: 18 },
              { url: "https://tafensw.buildingtools.co/tools/waterproofing-waterstop-shower-screen-enclosed-setdown-ncc2022.2-1.13?menu_id=9-2-4-4&shareId=ch6ODI-1767061462569&zoom=1&x=470.2773459056153&y=272.28375747277363&standard=&action=click&type=0", x: 878, y: 345.531, w: 131.67, h: 18 }
            ]
          }
        ]
      },
      // Slide 4 - Embed Tools into Current Lesson Plans
      {
        id: 4,
        file: "EDU Practical Guide (Implementation)/TAFE Implementation/4 - Embed Tools into Current Lesson Plans.svg",
        viewBoxWidth: 1440,
        viewBoxHeight: 1020,
        overlays: [
          { action: "back", x: 101, y: 80, w: 50, h: 50 },
          { action: "next", x: 1293, y: 80, w: 50, h: 50 },
          { action: "video", src: "https://20832146.fs1.hubspotusercontent-na1.net/hubfs/20832146/(Ari)%20Videos%20for%20Activation%20Pages%20-%20Jan%202026/EDU/11%20Ways/Embed%20Tools%20into%20Lesson%20Plans.webm", x: 1214, y: 220, w: 166, h: 48 },
          { action: "back", x: 60, y: 904, w: 142, h: 56 },
          { action: "next", x: 1198, y: 904, w: 182, h: 56 }
        ]
      },
      // Slide 5 - Playlists
      {
        id: 5,
        file: "EDU Practical Guide (Implementation)/TAFE Implementation/5 - Playlists.svg",
        viewBoxWidth: 1440,
        viewBoxHeight: 1042,
        overlays: [
          { action: "back", x: 101, y: 80, w: 50, h: 50 },
          { action: "next", x: 1293, y: 80, w: 50, h: 50 },
          { action: "video", src: "https://20832146.fs1.hubspotusercontent-na1.net/hubfs/20832146/(Ari)%20Videos%20for%20Activation%20Pages%20-%20Jan%202026/EDU/11%20Ways/Playlists.webm", x: 1214, y: 220, w: 166, h: 48 },
          { action: "gif", url: "EDU Practical Guide (Implementation)/GIF/image (9).gif", x: 755, y: 345, w: 618, h: 473 },
          { action: "back", x: 60, y: 926, w: 142, h: 56 },
          { action: "next", x: 1199, y: 926, w: 181, h: 56 }
        ]
      },
      // Slide 6 - Real Life vs. Code
      {
        id: 6,
        file: "EDU Practical Guide (Implementation)/TAFE Implementation/6 - Real Life vs. Code.svg",
        viewBoxWidth: 1440,
        viewBoxHeight: 1023,
        overlays: [
          { action: "back", x: 93.5, y: 35.583, w: 57, h: 25.282 },
          { action: "next", x: 1288.5, y: 35.583, w: 51, h: 23.410 },
          { action: "video", src: "https://20832146.fs1.hubspotusercontent-na1.net/hubfs/20832146/(Ari)%20Videos%20for%20Activation%20Pages%20-%20Jan%202026/EDU/11%20Ways/Real%20Life%20vs%20Code.mp4", x: 1214.5, y: 103.470, w: 168, h: 20.132 },
          { action: "url", url: "https://tafensw.buildingtools.co/tools/ncc-bca-building-classification-ncc2022-1.4?menu_id=10-0-0&shareId=ch6ODI-1767066152909&zoom=1.5007303518490005&x=464.96543491799656&y=258.1862346865616&standard=&action=click&type=0", x: 117.5, y: 196.173, w: 173, h: 6.555 },
          { action: "url", url: "https://tafensw.buildingtools.co/tools/waterproofing-waterstop-steel-door-jamb-ncc2022.2-1.5?v=1&point=f2ce110e-a471-45a7-8ab8-19ca91007793&standard=NCC%202022.2&standard=&menu_id=9-2-5-2&shareId=FmGcYD-1767318177129&zoom=1.8384592124201555&x=560.6176618954484&y=288.8464234620424&action=click&type=0", x: 119.5, y: 441.505, w: 162, h: 10.300 },
          { action: "url", url: "https://tafensw.buildingtools.co/tools/structure-timber-girder-saddle-truss-ncc2022.2-1.0?menu_id=8-3-3&shareId=ch6ODI-1767061462569&zoom=1.225043&x=517.2776215098921&y=267.94657116752524&standard=&action=click&type=0", x: 493.5, y: 687.774, w: 141, h: 9.364 },
          { action: "back", x: 53.5, y: 965.881, w: 147, h: 27.623 },
          { action: "next", x: 1196.5, y: 969.158, w: 187, h: 24.346 }
        ]
      },
      // Slide 7 - Treasure Hunt
      {
        id: 7,
        file: "EDU Practical Guide (Implementation)/TAFE Implementation/7 - Treasure Hunt.svg",
        viewBoxWidth: 1440,
        viewBoxHeight: 1017,
        overlays: [
          { action: "back", x: 92.5, y: 20.702, w: 56, h: 17.494 },
          { action: "next", x: 1286.5, y: 21.576, w: 50, h: 15.453 },
          { action: "video", src: "https://20832146.fs1.hubspotusercontent-na1.net/hubfs/20832146/(Ari)%20Videos%20for%20Activation%20Pages%20-%20Jan%202026/EDU/11%20Ways/Treasure%20Hunt.mp4", x: 1211.5, y: 63.563, w: 168, h: 13.412 },
          { action: "url", url: "https://tafensw.buildingtools.co/tools/services-plumbing-sanitary-floor-waste-gully-fwg-ncc2022.2-1.0?point=a13aebff-2beb-4655-a2a3-70826d8f8868&shareId=FmGcYD-1768448620244&standard=&zoom=1.4259723589673365&x=355.2729161003957&y=340.1958997741094&action=click&type=1", x: 59.5, y: 369.712, w: 199, h: 13.412 },
          { action: "url", url: "https://tafensw.buildingtools.co/tools/services-electrical-meter-box-residential-ncc2022.2-1.9?point=377eed32-5df1-42a8-8679-f546dd31a6ab&shareId=ch6ODI-1767066101738&standard=&zoom=3.676918424840311&x=438.9728366541588&y=520.999939025093&action=click&type=1", x: 55.5, y: 635.333, w: 203, h: 14.870 },
          { action: "url", url: "https://tafensw.buildingtools.co/tools/structure-timber-balconies-decks-ncc2022.2-1.10?menu_id=8-3-1&shareId=ch6ODI-1767832587653&zoom=4.6022210813908995&x=546.1171683271762&y=229.380556270058&standard=&action=click&type=0", x: 57.5, y: 902.413, w: 220, h: 12.829 },
          { action: "back", x: 55.5, y: 982.595, w: 146, h: 15.453 },
          { action: "next", x: 1196.5, y: 982.303, w: 188, h: 17.494 }
        ]
      },
      // Slide 8 - Discuss best Practices
      {
        id: 8,
        file: "EDU Practical Guide (Implementation)/TAFE Implementation/8 - Discuss best Practices.svg",
        viewBoxWidth: 1440,
        viewBoxHeight: 1017,
        overlays: [
          { action: "back", x: 66.5, y: 26.437, w: 62, h: 16.732 },
          { action: "next", x: 1259.5, y: 23.425, w: 60, h: 20.079 },
          { action: "video", src: "https://20832146.fs1.hubspotusercontent-na1.net/hubfs/20832146/(Ari)%20Videos%20for%20Activation%20Pages%20-%20Jan%202026/EDU/11%20Ways/7%20Best%20Practices.webm", x: 1189.5, y: 72.284, w: 165, h: 16.732 },
          { action: "url", url: "https://tafensw.buildingtools.co/tools/waterproofing-external-waterproofing-overview-ncc2022.2-1.3?menu_id=9-1-0&shareId=ch6ODI-1761099674449&zoom=2.4098450001880827&x=542.9517578029951&y=261.4928632361109&standard=&standard=&action=click&action=click&type=0&type=0", x: 397.5, y: 176.026, w: 200, h: 6.693 },
          { action: "url", url: "https://tafensw.buildingtools.co/tools/waterproofing-cavity-slide-door-waterstop-angle-ncc2022.2-1.15?v=1767834450170&shareId=ch6ODI-1767832874197&zoom=1.636000432269329&menu_id=9-2-5-0&x=370.727375430393&y=378.06025650011753&point=d498491b-70c4-4512-92c2-a39f157e1bbf&standard=&action=click&type=0", x: 733.5, y: 442.407, w: 273, h: 3.346 },
          { action: "url", url: "https://tafensw.buildingtools.co/tools/waterproofing-film-thickness-test-location-points-ncc2022.2-1.5?x=485.91793669790576&y=286.77264394057755&zoom=1.9348422312430922&shareId=ch6ODI-1760938191433&menu_id=9-3-2&standard=&action=click&type=0", x: 199.5, y: 707.449, w: 149, h: 6.693 },
          { action: "back", x: 32.5, y: 975.169, w: 149, h: 21.752 },
          { action: "next", x: 1176.5, y: 975.503, w: 179, h: 19.410 }
        ]
      },
      // Slide 9 - Student Presentation
      {
        id: 9,
        file: "EDU Practical Guide (Implementation)/TAFE Implementation/9 - Student Presentation.svg",
        viewBoxWidth: 1440,
        viewBoxHeight: 1027,
        overlays: [
          { action: "back", x: 101, y: 80, w: 50, h: 50 },
          { action: "next", x: 1293, y: 80, w: 50, h: 50 },
          { action: "video", src: "https://20832146.fs1.hubspotusercontent-na1.net/hubfs/20832146/(Ari)%20Videos%20for%20Activation%20Pages%20-%20Jan%202026/EDU/11%20Ways/8%20Student%20Presentation.webm", x: 1214, y: 220, w: 166, h: 48 },
          { action: "url", url: "https://tafensw.buildingtools.co/tools/site-works-pool-safety-fence-gate?v=1&menu_id=5-6&shareId=ch6ODI-1761100718604&zoom=2.1048519522998363&x=495.0831070206157&y=310.2727794476419", x: 116, y: 566.228, w: 87, h: 11.401 },
          { action: "url", url: "https://tafensw.buildingtools.co/tools/site-works-pool-safety-gate-ncc2022.2-1.3?v=1767064939224&shareId=ch6ODI-1761100718604&zoom=1.1449&menu_id=5-6&x=557.9232605022563&y=202.06341738249495&standard=&action=click&type=0", x: 207, y: 564.327, w: 87, h: 12.351 },
          { action: "url", url: "https://tafensw.buildingtools.co/tools/site-works-pool-safety-fence-ncc2022.2-1.5?v=1767064970623&shareId=ch6ODI-1761100718604&zoom=1.3107960100000002&menu_id=5-6&x=579.4681031284093&y=247.4832047635549&standard=&action=click&type=0", x: 299, y: 565.278, w: 90, h: 12.351 },
          { action: "back", x: 60, y: 911, w: 142, h: 56 },
          { action: "next", x: 1198, y: 911, w: 182, h: 56 }
        ]
      },
      // Slide 10 - SpecBlock Demo
      {
        id: 10,
        file: "EDU Practical Guide (Implementation)/TAFE Implementation/10 - SpecBlock Demo.svg",
        viewBoxWidth: 1440,
        viewBoxHeight: 1017,
        overlays: [
          { action: "back", x: 101, y: 80, w: 50, h: 50 },
          { action: "next", x: 1293, y: 80, w: 50, h: 50 },
          { action: "video", src: "https://20832146.fs1.hubspotusercontent-na1.net/hubfs/20832146/(Ari)%20Videos%20for%20Activation%20Pages%20-%20Jan%202026/EDU/11%20Ways/9%20Specblocks.mp4", x: 1214, y: 220, w: 166, h: 48 },
          { action: "url", url: "https://buildingtools.co/install-tools-revit-add-on/", x: 120, y: 405, w: 278, h: 20 },
          { action: "url", url: "https://buildingtools.co/install-tools-revit-add-on/", x: 80, y: 442, w: 432, h: 20 },
          { action: "back", x: 60, y: 901, w: 142, h: 56 },
          { action: "next", x: 1198, y: 901, w: 182, h: 56 }
        ]
      },
      // Slide 11 - Safety, Risk and Liability
      {
        id: 11,
        file: "EDU Practical Guide (Implementation)/TAFE Implementation/11 - Safety, Risk and Liability.svg",
        viewBoxWidth: 1440,
        viewBoxHeight: 1017,
        overlays: [
          { action: "back", x: 97, y: 58.504, w: 52, h: 40.872 },
          { action: "next", x: 1288, y: 60.106, w: 61, h: 43.277 },
          { action: "video", src: "https://20832146.fs1.hubspotusercontent-na1.net/hubfs/20832146/(Ari)%20Videos%20for%20Activation%20Pages%20-%20Jan%202026/EDU/11%20Ways/Module%2010%20-%20Safety%20V2_2.webm", x: 1215, y: 175.511, w: 167, h: 39.270 },
          { action: "url", url: "https://tafensw.buildingtools.co/tools/safety-overview-eliminate-falls-risk-ncc2022.2-1.2?menu_id=5-0&shareId=ch6ODI-1760939760336&zoom=1.8384592124201555&x=256.50634033786724&y=160.63131362309363&standard=&action=click&type=0&standard=&action=click&type=0", x: 204, y: 395.901, w: 146, h: 16.830 },
          { action: "url", url: "https://tafensw.buildingtools.co/tools/safety-overview-eliminate-falls-risk-ncc2022.2-1.2?menu_id=5-0&shareId=ch6ODI-1760939760336&zoom=1.718186179831921&x=690.7910227361785&y=342.34938846540183&standard=&standard=&action=click&action=click&type=0&type=0", x: 201, y: 427.957, w: 127, h: 14.426 },
          { action: "url", url: "https://tafensw.buildingtools.co/tools/safety-overview-eliminate-falls-risk-ncc2022.2-1.2?menu_id=5-0&shareId=ch6ODI-1760939760336&zoom=2.252191588960825&x=516.0388093943355&y=479.79640486986284&standard=&action=click&type=0&standard=&action=click&type=0", x: 267, y: 464.021, w: 159, h: 8.014 },
          { action: "url", url: "https://tafensw.buildingtools.co/tools/safety-overview-ppe-falls-risk-ncc2022.2-1.11?r=1&x=553.5191071015145&y=240.21599730372742&zoom=1&shareId=ch6ODI-1760939760336&standard=,&menu_id=5-0&standard=&action=click&type=0", x: 396, y: 483.255, w: 36, h: 15.227 },
          { action: "url", url: "https://tafensw.buildingtools.co/tools/safety-overview-eliminate-exposure-risk-ncc2022.2-1.3?point=ed3d0eb3-429d-4a5a-8132-288c9d04203d&shareId=ch6ODI-1760939760336&standard=&zoom=2.1048519522998363&x=817.2833008898259&y=253.90880842957762&action=click&type=1", x: 382, y: 536.950, w: 70, h: 20.035 },
          { action: "back", x: 52, y: 924.035, w: 153, h: 43.277 },
          { action: "next", x: 1184, y: 920.830, w: 198, h: 48.085 }
        ]
      },
      // Slide 12 - Critical Thinking
      {
        id: 12,
        file: "EDU Practical Guide (Implementation)/TAFE Implementation/12 - Critical Thinking.svg",
        viewBoxWidth: 1440,
        viewBoxHeight: 1017,
        overlays: [
          { action: "back", x: 92.5, y: 54.835, w: 58, h: 38.019 },
          { action: "next", x: 1285.5, y: 57.028, w: 61, h: 37.288 },
          { action: "video", src: "https://20832146.fs1.hubspotusercontent-na1.net/hubfs/20832146/(Ari)%20Videos%20for%20Activation%20Pages%20-%20Jan%202026/EDU/11%20Ways/11%20Critical%20thinking.webm", x: 1215.5, y: 157.924, w: 168, h: 41.674 },
          { action: "back", x: 52.5, y: 945.349, w: 152, h: 40.212 },
          { action: "next", x: 1149.5, y: 939.500, w: 235, h: 44.599 }
        ]
      },
      // Slide 13 - All set
      {
        id: 13,
        file: "EDU Practical Guide (Implementation)/TAFE Implementation/13 - All set.svg",
        viewBoxWidth: 1440,
        viewBoxHeight: 1033,
        overlays: [
          { action: "back", x: 91, y: 105.117, w: 57, h: 60.994 },
          { action: "url", url: "https://tafensw.buildingtools.co", x: 615, y: 669.633, w: 205, h: 76.567 },
          { action: "back", x: 60, y: 917, w: 142, h: 56 }
        ]
      }
    ];

    const state = {
      index: 0, // 0..12
      loaded: new Array(components.length).fill(false),
      viewBox: new Array(components.length).fill(null), // {w,h}
      accordion: {} // per-slide accordion expanded state maps
    };

    function buildDOM() {
      components.forEach((c, i) => {
        const comp = document.createElement('div');
        comp.className = 'component' + (i === 0 ? ' active' : '');
        comp.dataset.idx = i;

        const host = document.createElement('div');
        host.className = 'svg-host' + (c.accordions ? ' accordion-slide' : '');

        const img = document.createElement('img');
        img.src = c.file;
        img.setAttribute('aria-label', `Slide ${c.id}`);

        const overlays = document.createElement('div');
        overlays.className = 'overlay-root';

        host.appendChild(img);
        host.appendChild(overlays);  // Put overlays inside the svg-host
        comp.appendChild(host);
        container.appendChild(comp);

        // Use fixed viewBox dimensions from component config
        state.viewBox[i] = { w: c.viewBoxWidth || 1440, h: c.viewBoxHeight || 2500 };
        
        // Wait for image to load before rendering overlays
        img.addEventListener('load', () => {
          state.loaded[i] = true;
          // initialize accordion state for this slide
          if (c.accordions && !state.accordion[i]) {
            state.accordion[i] = {};
            c.accordions.forEach(acc => { state.accordion[i][acc.id] = false; });
          }
          renderOverlays(i);
        });
      });
    }

    function pct(n, d) { return (n / d) * 100; }

    function renderOverlays(idx) {
      const compEl = container.querySelector(`.component[data-idx="${idx}"]`);
      if (!compEl) return;
      const root = compEl.querySelector('.overlay-root');
      root.innerHTML = '';
      
      const showDebug = debugToolActive;
      const host = compEl.querySelector('.svg-host');
      const current = components[idx];
      
      // Calculate dynamic height for accordion slides (TAFE specific) BEFORE reading vb
      if (current.accordions) {
        // For TAFE: Calculate total height dynamically
        const headerHeight = 290; // Top section before accordions start
        const overviewSectionHeight = 1784; // Height of Frame 90.svg (overview section)
        const spacingAfterAccordions = 150; // Gap between accordions and overview
        const bottomNavHeight = 200; // Height of Frame 271.svg (bottom navigation)
        const bottomPadding = 50; // Extra padding at bottom
        
        let accordionTotalHeight = 0;
        current.accordions.forEach((acc) => {
          const expanded = state.accordion[idx] && state.accordion[idx][acc.id];
          accordionTotalHeight += expanded ? acc.hE : acc.hC;
        });
        
        // Dynamic height = header + all accordions + spacing + overview + bottom nav + padding
        const dynamicHeight = headerHeight + accordionTotalHeight + spacingAfterAccordions + overviewSectionHeight + bottomNavHeight + bottomPadding;
        
        // Update the component's viewBox height
        state.viewBox[idx].h = dynamicHeight;
        components[idx].viewBoxHeight = dynamicHeight;
        
        // Set the svg-host height dynamically to expand the background
        const hostRect = host.getBoundingClientRect();
        const scale = hostRect.width / (current.viewBoxWidth || 1440);
        const dynamicHeightPx = dynamicHeight * scale;
        host.style.height = dynamicHeightPx + 'px';
      }
      
      // NOW read the viewBox after it's been updated
      const vb = state.viewBox[idx];
      if (!vb) return; // wait until we know viewbox

      // Dynamically position bottom section on slide 3 (TAFE specific)
      if (idx === 2 && current.accordions) {
        const hostRect = host.getBoundingClientRect();
        const scale = hostRect.width / vb.w;
        
        // Calculate where accordions end
        let accordionTotalHeight = 0;
        current.accordions.forEach((acc) => {
          const expanded = state.accordion[idx] && state.accordion[idx][acc.id];
          accordionTotalHeight += expanded ? acc.hE : acc.hC;
        });
        
        const headerHeight = 290;
        const accordionsEndY = headerHeight + accordionTotalHeight;
        const bottomSectionHeight = 1800; // Height of Overview section + nav buttons
        const spacing = 150; // Space between accordions and bottom section
        
        // Position the bottom section right after accordions
        const bottomSectionY = accordionsEndY + spacing;
        
        // Render the Overview section (Frame 90)
        const overviewImgEl = document.createElement('img');
        overviewImgEl.src = 'EDU Practical Guide (Implementation)/Frame 90.svg';
        overviewImgEl.style.position = 'absolute';
        overviewImgEl.style.left = (80 * scale) + 'px';
        overviewImgEl.style.top = (bottomSectionY * scale) + 'px';
        overviewImgEl.style.width = (1281 * scale) + 'px';
        overviewImgEl.style.height = (1784 * scale) + 'px';
        overviewImgEl.style.pointerEvents = 'none';
        overviewImgEl.style.zIndex = '10';
        root.appendChild(overviewImgEl);
        
        // Render the bottom navigation (Frame 271) after Overview
        const bottomNavY = bottomSectionY + 1784; // Position right after Overview
        const bottomNavImgEl = document.createElement('img');
        bottomNavImgEl.src = 'EDU Practical Guide (Implementation)/TAFE Implementation/Bottom buttons/Frame 271.svg';
        bottomNavImgEl.style.position = 'absolute';
        bottomNavImgEl.style.left = (80 * scale) + 'px';
        bottomNavImgEl.style.top = (bottomNavY * scale) + 'px';
        bottomNavImgEl.style.width = (1281 * scale) + 'px';
        bottomNavImgEl.style.height = (200 * scale) + 'px'; // Estimate height, adjust if needed
        bottomNavImgEl.style.pointerEvents = 'none';
        bottomNavImgEl.style.zIndex = '10';
        root.appendChild(bottomNavImgEl);
        
        // Add clickable overlays for navigation buttons on Frame 271
        // Back button - use coordinates from user
        const bottomBackBtn = document.createElement('div');
        bottomBackBtn.className = 'click-area' + (showDebug ? ' debug' : '');
        bottomBackBtn.style.position = 'absolute';
        bottomBackBtn.style.left = (75.5 * scale) + 'px';
        bottomBackBtn.style.top = ((bottomNavY + (2762 - bottomNavY)) * scale) + 'px';
        bottomBackBtn.style.width = (146 * scale) + 'px';
        bottomBackBtn.style.height = (42 * scale) + 'px';
        bottomBackBtn.style.pointerEvents = 'auto';
        bottomBackBtn.style.cursor = 'pointer';
        bottomBackBtn.style.zIndex = '20';
        bottomBackBtn.title = 'BACK';
        bottomBackBtn.addEventListener('click', (e) => { e.preventDefault(); e.stopPropagation(); goTo(state.index - 1); });
        root.appendChild(bottomBackBtn);
        
        // Next button - use coordinates from user
        const bottomNextBtn = document.createElement('div');
        bottomNextBtn.className = 'click-area' + (showDebug ? ' debug' : '');
        bottomNextBtn.style.position = 'absolute';
        bottomNextBtn.style.left = (1184.5 * scale) + 'px';
        bottomNextBtn.style.top = ((bottomNavY + (2758 - bottomNavY)) * scale) + 'px';
        bottomNextBtn.style.width = (180 * scale) + 'px';
        bottomNextBtn.style.height = (46 * scale) + 'px';
        bottomNextBtn.style.pointerEvents = 'auto';
        bottomNextBtn.style.cursor = 'pointer';
        bottomNextBtn.style.zIndex = '20';
        bottomNextBtn.title = 'NEXT';
        bottomNextBtn.addEventListener('click', (e) => { e.preventDefault(); e.stopPropagation(); goTo(state.index + 1); });
        root.appendChild(bottomNextBtn);
      }

      // Render accordions (if any)
      if (current.accordions) {
        // Calculate scale once and reuse for consistency
        const hostRect = host.getBoundingClientRect();
        const scale = hostRect.width / vb.w;
        const accordionLeftPx = 60 * scale;  // Calculate once
        const accordionWidthPx = 1320 * scale; // Calculate once
        
        let offset = 0; // cumulative extra height from expanded items above
        current.accordions.forEach((acc) => {
          const expanded = state.accordion[idx] && state.accordion[idx][acc.id];
          const y = acc.y + offset;
          const h = expanded ? acc.hE : acc.hC;

          // EXACT RMIT approach - Use <img> with fixed pixel positioning
          const imgEl = document.createElement('img');
          imgEl.src = expanded ? acc.expanded : acc.collapsed;
          imgEl.style.position = 'absolute';
          imgEl.style.left = accordionLeftPx + 'px';
          imgEl.style.top = (y * scale) + 'px';
          imgEl.style.width = accordionWidthPx + 'px';
          imgEl.style.height = (h * scale) + 'px';
          imgEl.style.pointerEvents = 'none';
          imgEl.style.zIndex = '10';
          imgEl.setAttribute('aria-label', acc.id);
          root.appendChild(imgEl);

          // Add a toggle overlay: only cover the header bar (62px)
          const toggleEl = document.createElement('div');
          toggleEl.style.position = 'absolute';
          toggleEl.style.left = accordionLeftPx + 'px';
          toggleEl.style.top = (y * scale) + 'px';
          toggleEl.style.width = accordionWidthPx + 'px';
          toggleEl.style.height = (62 * scale) + 'px';
          toggleEl.style.cursor = 'pointer';
          toggleEl.style.pointerEvents = 'auto';
          toggleEl.style.background = 'transparent';
          toggleEl.style.zIndex = '11';
          toggleEl.dataset.accordionId = acc.id;
          if (showDebug) {
            toggleEl.style.background = 'rgba(255, 0, 0, 0.2)';
            toggleEl.style.border = '2px solid red';
          }
          toggleEl.addEventListener('click', ((accordionId, currentExpanded, accY) => {
            return (e) => {
              e.stopPropagation();
              if (!state.accordion[idx]) state.accordion[idx] = {};
              state.accordion[idx][accordionId] = !currentExpanded;
              renderOverlays(idx);
              notifyParentHeight();
            };
          })(acc.id, expanded, y));
          root.appendChild(toggleEl);

          // Add clickable overlays for links inside accordion content when expanded
          if (expanded && acc.links) {
            acc.links.forEach((link) => {
              const linkEl = document.createElement('a');
              linkEl.href = link.url;
              linkEl.target = '_blank';
              linkEl.style.position = 'absolute';
              linkEl.style.left = (accordionLeftPx + (link.x * scale)) + 'px';
              linkEl.style.top = ((y + link.y) * scale) + 'px';
              linkEl.style.width = (link.w * scale) + 'px';
              linkEl.style.height = (link.h * scale) + 'px';
              linkEl.style.pointerEvents = 'auto';
              linkEl.style.cursor = 'pointer';
              linkEl.style.zIndex = '12';
              linkEl.style.display = 'block';
              if (showDebug) {
                linkEl.style.background = 'rgba(0, 255, 0, 0.2)';
                linkEl.style.border = '1px solid green';
              }
              root.appendChild(linkEl);
            });
          }

          // update offset for following accordions
          offset += (h - acc.hC);
        });
      }
      
      // Render regular overlays (nav/buttons)
      if (current.overlays) {
        current.overlays.forEach((o, oi) => {
        // Handle GIF overlays differently - render as image
        if (o.action === 'gif') {
          const gifEl = document.createElement('img');
          gifEl.src = o.url;
          gifEl.style.position = 'absolute';
          gifEl.style.left = (o.x / vb.w) * 100 + '%';
          gifEl.style.top = (o.y / vb.h) * 100 + '%';
          gifEl.style.width = (o.w / vb.w) * 100 + '%';
          gifEl.style.height = (o.h / vb.h) * 100 + '%';
          gifEl.style.borderRadius = '32px';
          gifEl.style.objectFit = 'cover';
          gifEl.style.pointerEvents = 'none';
          gifEl.style.zIndex = '10';
          root.appendChild(gifEl);
          return;
        }
        
        const el = document.createElement('div');
        el.className = 'click-area' + (showDebug ? ' debug' : '');
        
        // Convert SVG coordinates to percentage based on viewBox
        let leftPct = (o.x / vb.w) * 100;
        const topPct = (o.y / vb.h) * 100;
        let widthPct = (o.w / vb.w) * 100;
        const heightPct = (o.h / vb.h) * 100;
        
        el.style.left = leftPct + '%';
        el.style.top = topPct + '%';
        el.style.width = widthPct + '%';
        el.style.height = heightPct + '%';
        el.title = o.action.toUpperCase();

        el.addEventListener('click', (e) => {
          e.preventDefault();
          e.stopPropagation();
          handleAction(o);
        });

        root.appendChild(el);
        });
      }
    }

    function handleAction(o) {
      if (o.action === 'next') {
        goTo(state.index + 1);
      } else if (o.action === 'back') {
        goTo(state.index - 1);
      } else if (o.action === 'url' && o.url) {
        window.open(o.url, '_blank', 'noopener');
      } else if (o.action === 'video' && o.src) {
        showVideoModal(o.src);
      } else {
        console.log('Unhandled action:', o);
      }
    }

    function showVideoModal(src) {
      // If we're in an iframe, send message to parent window to show modal there
      if (window.parent !== window) {
        window.parent.postMessage({ 
          action: 'showVideoModal', 
          videoSrc: src 
        }, '*');
        return;
      }
      
      const modal = document.getElementById('videoModal');
      const video = document.getElementById('modalVideo');
      const source = document.getElementById('modalVideoSource');
      const extension = src.split('.').pop().toLowerCase();
      source.type = extension === 'webm' ? 'video/webm' : 'video/mp4';
      source.src = src;
      video.load();
      modal.classList.add('active');
    }

    function closeVideoModal() {
      const modal = document.getElementById('videoModal');
      const video = document.getElementById('modalVideo');
      video.pause();
      modal.classList.remove('active');
    }

    function goTo(newIndex) {
      const max = components.length - 1;
      const clamped = Math.max(0, Math.min(max, newIndex));
      if (clamped === state.index) return;
      
      const prev = container.querySelector(`.component[data-idx="${state.index}"]`);
      const next = container.querySelector(`.component[data-idx="${clamped}"]`);
      if (prev) prev.classList.remove('active');
      if (next) next.classList.add('active');
      state.index = clamped;
      
      // ensure overlays re-render
      if (state.viewBox[clamped]) renderOverlays(clamped);
      
      // Notify parent window of new height
      notifyParentHeight();
      
      // Scroll to top
      if (window.parent !== window) {
        window.parent.postMessage({ action: 'scrollToTop' }, '*');
      }
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }
    
    function notifyParentHeight() {
      if (window.parent !== window) {
        // Get actual rendered height of the container to account for all content
        const actualHeight = Math.max(
          components[state.index].viewBoxHeight,
          container.offsetHeight,
          container.scrollHeight
        );
        // Add 100px padding to ensure bottom content isn't cut off
        const paddedHeight = actualHeight + 100;
        window.parent.postMessage({ 
          action: 'resizeIframe', 
          height: paddedHeight 
        }, '*');
      }
    }

    // Debug tool
    let debugToolActive = false;
    let dragState = null;
    let selectionBox = null;

    function setupDebugTool() {
      const debugBtn = document.getElementById('debugToolButton');
      const debugInfo = document.getElementById('debugInfo');
      
      debugBtn.addEventListener('click', () => {
        debugToolActive = !debugToolActive;
        debugBtn.classList.toggle('active', debugToolActive);
        debugBtn.textContent = debugToolActive ? '‚úÖ' : 'üéØ';
        debugInfo.classList.toggle('active', debugToolActive);
        if (!debugToolActive) {
          document.getElementById('debugInfoContent').innerHTML = 'Drag to select an area...';
        }
        // Re-render overlays for current component
        if (state.viewBox[state.index]) renderOverlays(state.index);
      });
      
      // Drag-to-select area coordinate tracking
      container.addEventListener('mousedown', (e) => {
        if (!debugToolActive) return;
        
        const compEl = container.querySelector(`.component[data-idx="${state.index}"]`);
        if (!compEl) return;
        
        const host = compEl.querySelector('.svg-host');
        if (!host) return;
        
        const rect = host.getBoundingClientRect();
        const vb = state.viewBox[state.index];
        if (!vb) return;
        
        // Start drag - use clientX/Y directly for fixed positioning
        dragState = {
          startX: e.clientX,
          startY: e.clientY,
          rect: rect,
          vb: vb,
          host: host
        };
        
        // Create selection box with fixed positioning
        selectionBox = document.createElement('div');
        selectionBox.className = 'debug-selection';
        selectionBox.style.left = e.clientX + 'px';
        selectionBox.style.top = e.clientY + 'px';
        selectionBox.style.width = '0px';
        selectionBox.style.height = '0px';
        document.body.appendChild(selectionBox);
        
        e.preventDefault();
      });
      
      document.addEventListener('mousemove', (e) => {
        if (!dragState || !selectionBox) return;
        
        const width = Math.abs(e.clientX - dragState.startX);
        const height = Math.abs(e.clientY - dragState.startY);
        const left = Math.min(e.clientX, dragState.startX);
        const top = Math.min(e.clientY, dragState.startY);
        
        selectionBox.style.left = left + 'px';
        selectionBox.style.top = top + 'px';
        selectionBox.style.width = width + 'px';
        selectionBox.style.height = height + 'px';
        
        // Update debug info in real-time
        const svgX = ((left - dragState.rect.left) / dragState.rect.width) * dragState.vb.w;
        const svgY = ((top - dragState.rect.top) / dragState.rect.height) * dragState.vb.h;
        const svgW = (width / dragState.rect.width) * dragState.vb.w;
        const svgH = (height / dragState.rect.height) * dragState.vb.h;
        
        document.getElementById('debugInfoContent').innerHTML = `
          <div class="coord-line"><span class="coord-label">x:</span> ${svgX.toFixed(3)}</div>
          <div class="coord-line"><span class="coord-label">y:</span> ${svgY.toFixed(3)}</div>
          <div class="coord-line"><span class="coord-label">w:</span> ${svgW.toFixed(3)}</div>
          <div class="coord-line"><span class="coord-label">h:</span> ${svgH.toFixed(3)}</div>
        `;
      });
      
      document.addEventListener('mouseup', (e) => {
        if (!dragState || !selectionBox) return;
        
        const width = Math.abs(e.clientX - dragState.startX);
        const height = Math.abs(e.clientY - dragState.startY);
        const left = Math.min(e.clientX, dragState.startX);
        const top = Math.min(e.clientY, dragState.startY);
        
        // Convert to SVG coordinates
        const svgX = ((left - dragState.rect.left) / dragState.rect.width) * dragState.vb.w;
        const svgY = ((top - dragState.rect.top) / dragState.rect.height) * dragState.vb.h;
        const svgW = (width / dragState.rect.width) * dragState.vb.w;
        const svgH = (height / dragState.rect.height) * dragState.vb.h;
        
        // Format for easy copying
        const overlayConfig = `{ action: "url", url: "https://example.com", x: ${svgX.toFixed(3)}, y: ${svgY.toFixed(3)}, w: ${svgW.toFixed(3)}, h: ${svgH.toFixed(3)} }`;
        
        // Update debug info display
        document.getElementById('debugInfoContent').innerHTML = `
          <div style="margin-bottom: 8px; color: #BFE002;">Slide ${state.index + 1}</div>
          <div class="coord-line"><span class="coord-label">x:</span> ${svgX.toFixed(3)}</div>
          <div class="coord-line"><span class="coord-label">y:</span> ${svgY.toFixed(3)}</div>
          <div class="coord-line"><span class="coord-label">w:</span> ${svgW.toFixed(3)}</div>
          <div class="coord-line"><span class="coord-label">h:</span> ${svgH.toFixed(3)}</div>
          <div style="margin-top: 10px; padding-top: 10px; border-top: 1px solid #444; font-size: 11px;">
            <div style="color: #BFE002; margin-bottom: 5px;">‚úì Copied to clipboard!</div>
            <div style="color: #999; word-break: break-all;">${overlayConfig}</div>
          </div>
        `;
        
        // Copy overlay config to clipboard
        navigator.clipboard.writeText(overlayConfig).then(() => {
          // Visual feedback - flash the debug button green
          const debugBtn = document.getElementById('debugToolButton');
          const originalBg = debugBtn.style.background;
          debugBtn.style.background = 'rgba(0, 255, 0, 0.9)';
          setTimeout(() => {
            debugBtn.style.background = originalBg;
          }, 300);
        }).catch(() => {
          document.getElementById('debugInfoContent').innerHTML += '<div style="color: #ff6b6b; margin-top: 5px;">‚ö† Clipboard copy failed</div>';
        });
        
        // Clean up
        if (selectionBox) {
          selectionBox.remove();
          selectionBox = null;
        }
        dragState = null;
      });
    }

    function hookKeyboard() {
      document.addEventListener('keydown', (e) => {
        if (e.key === 'ArrowRight' || e.key === 'ArrowDown') {
          e.preventDefault();
          goTo(state.index + 1);
        } else if (e.key === 'ArrowLeft' || e.key === 'ArrowUp') {
          e.preventDefault();
          goTo(state.index - 1);
        } else if (e.key === 'Escape') {
          closeVideoModal();
        }
      });
    }

    function hookVideoModal() {
      const videoModal = document.getElementById('videoModal');
      const closeVideoBtn = document.getElementById('closeVideoModal');
      
      closeVideoBtn.addEventListener('click', closeVideoModal);
      videoModal.addEventListener('click', (e) => {
        if (e.target === videoModal) {
          closeVideoModal();
        }
      });
    }

    // Initialize
    buildDOM();
    setupDebugTool();
    hookKeyboard();
    hookVideoModal();
    
    // Notify parent of initial height after DOM is ready
    window.addEventListener('load', () => {
      notifyParentHeight();
    });
    
    // Display help message on load
    console.log('%cüéØ TAFE Implementation Navigation', 'font-size: 16px; font-weight: bold; color: #1482FF;');
    console.log('%cKeyboard shortcuts:', 'font-weight: bold;');
    console.log('  ‚Üê ‚Üí Arrow keys - Navigate slides');
    console.log('  ESC - Close video modal');
    console.log('\n%cDebug Tool:', 'font-weight: bold;');
    console.log('  Click the üéØ button in the bottom-left corner to toggle debug mode');
    console.log('  When active, drag and select areas to get coordinates');
  </script>
</body>
</html>
